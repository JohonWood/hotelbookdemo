<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <title>网站主页</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css"
          th:href="@{/adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/font-awesome/css/font-awesome.min.css"
          th:href="@{/adminlte/bower_components/font-awesome/css/font-awesome.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/Ionicons/css/ionicons.min.css"
          th:href="@{/adminlte/bower_components/Ionicons/css/ionicons.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/dist/css/AdminLTE.min.css"
          th:href="@{/adminlte/dist/css/AdminLTE.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/dist/css/skins/skin-blue.min.css"
          th:href="@{/adminlte/dist/css/skins/skin-blue.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/select2/dist/css/select2.min.css"
          th:href="@{/adminlte/bower_components/select2/dist/css/select2.min.css}">
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/dist/css/AdminLTE.min.css"
          th:href="@{/adminlte/dist/css/AdminLTE.min.css}">
    <style>
        a:hover {
            text-decoration: underline
        }
        .top{
            width: 60px;
            height: 30px;
            border-radius: 10px;
            position: fixed;
            right: 15px;
            bottom: 20%;
            border: none;
        }
        .top #topArrow:hover{
            background: mediumpurple;
        }
        .fa #TopArraow{
            margin:auto;
            width:60%;
            height:60%
        }
    </style>
</head>
<body class="hold-transition skin-blue sidebar-mini">

<div class="wrapper">
    <header class="main-header ">
        <a href="/test/host" class="logo bg-purple btn">
            <!-- mini logo for sidebar mini 50x50 pixels -->
            <span class="logo-mini"><b>504</b>购</span>
            <!-- logo for regular state and mobile devices -->
            <span class="logo-lg"><b>504</b>订购网</span>
        </a>

        <nav class="navbar navbar-static-top bg-purple" role="navigation">
            <a href="#" class="sidebar-toggle bg-purple btn" data-toggle="push-menu" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>

            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">

                    <!-- Tasks Menu -->
                    <li class="dropdown tasks-menu" th:if="${isLogin}==true">
                        <!-- Menu Toggle Button -->
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-flag-o"></i>
                            <span class="label label-danger" th:text="${numOfOrders}"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">你有<span th:text="${numOfOrders}"></span>个酒店订单</li>
                            <li>
                                <!-- Inner menu: contains the tasks -->
                                <ul class="menu">
                                    <li th:if="${numOfOrders}==0">
                                        <a href="#">
                                            <!-- Task title and progress text -->
                                            <h3>
                                                无订单
                                            </h3>

                                            </p>
                                        </a>
                                    </li>
                                    <li th:each="order,orderStat: ${orderList}" th:if="${orderStat.count lt 3 && numOfOrders!=0}">
                                        <!-- Task item -->
                                        <a href="#">
                                            <!-- Task title and progress text -->
                                            <h3>
                                                <span th:text="${order.hotelName}">酒店</span>
                                            </h3>
                                            <p class="text-black">
                                                <span th:text="${order.roomType}">sadasd</span>
                                                <span class="pull-right"><i class="fa fa-calendar"></i>
                                            <span class="text-black" th:text='${order.checkInTime}'></span>入住</span>
                                            </p>
                                        </a>
                                    </li>
                                    <!-- end task item -->
                                </ul>
                            </li>
                            <li class="footer">
                                <a href="#">查看所有订单</a>
                            </li>
                        </ul>
                    </li>
                    <!-- User Account Menu -->
                    <li class="dropdown user user-menu">
                        <!-- Menu Toggle Button -->
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="hidden-xs" th:if="${isLogin}==true" th:text="${User_name}"></span>
                            <span class="hidden-xs" th:if="${isLogin}==false">未登录</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="user-header bg-purple">

                                <p th:if="${isLogin}==true">
                                    <span th:text="${User_name}"></span>
                                    <br>
                                    <br>
                                    <small>亲爱的用户，欢迎来到504订房网！</small>
                                </p>
                                <p th:if="${isLogin}==false">
                                    <span>用户未登录</span>
                                    <br>
                                    <br>
                                    <small>如果未注册，请注册后登录网站</small>
                                </p>
                            </li>
                            <!-- Menu Body -->
                            <li class="user-body" th:if="${isLogin}==true">
                                <div class="row" style="">
                                    <div class="col-xs-4 text-center">

                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <a href="#">我的订单</a>
                                    </div>
                                    <div class="col-xs-4 text-center">
                                        <!--<a href="#">Friends</a>-->
                                    </div>
                                </div>
                                <!-- /.row -->
                            </li>
                            <!-- Menu Footer-->
                            <li class="user-footer" th:if="${isLogin}==true">
                                <div class="pull-left">
                                    <a href="#" class="btn btn-default btn-flat">个人信息</a>
                                </div>
                                <div class="pull-right">
                                    <a href="#" class="btn btn-default btn-flat">登出</a>
                                </div>
                            </li>
                            <li class="user-footer" th:if="${isLogin}==false">
                                <div class="pull-left">
                                    <a href="#" class="btn btn-default btn-flat">登录</a>
                                </div>
                                <div class="pull-right">
                                    <a href="#" class="btn btn-default btn-flat">注册</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
            <!-- Sidebar Menu -->
            <ul class="sidebar-menu" data-widget="tree">
                <li class="header">HEADER</li>
                <!-- Optionally, you can add icons to the links -->
                <li class="active"><a href="#"><i class="fa fa-link"></i> <span>Link</span></a></li>
                <li><a href="#"><i class="fa fa-link"></i> <span>Another Link</span></a></li>
                <li class="treeview">
                    <a href="#"><i class="fa fa-link"></i> <span>Multilevel</span>
                        <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
                    </a>
                    <ul class="treeview-menu">
                        <li><a href="#">Link in level 2</a></li>
                        <li><a href="#">Link in level 2</a></li>
                    </ul>
                </li>
            </ul>
          <!-- search form (Optional) -->
            <form action="/test/post" method="post" class="sidebar-menu">
                    <div class="input-group sidebar-form">
                        <input type="text" name="hotelKey" class="form-control" placeholder="Search...">
                        <span class="input-group-btn">
              <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
              </button>
            </span>
                    </div>
                <div class="input-group sidebar-form col-xs-10">
                    <select name="countryKey" class="form-control select2 " id="CountrySelect">
                        <option th:each="country: ${countryList}" th:text="${country}" th:if="${country}!='中国'"></option>
                        <option th:each="country: ${countryList}" th:text="${country}" selected="selected" th:if="${country}=='中国'"></option>
                    </select>
                </div>
                <div class="input-group sidebar-form col-xs-10">
                    <select name="cityKey" class="form-control input-lg select2" id="CitySelect">
                        <!--由JS代码生成-->
                    </select>
                </div>
            </form>
            <!-- /.search form -->


            <!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
    </aside>
    <div class="content-wrapper -align-center" th:style="'align-content: center;background: url('+@{/picture/backImg.jpg} + ') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;'">
        <!-- Content Header (Page header) -->

        <div class="container">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    搜索结果
                    <small>总计<span th:text="${resultNum}"></span>家酒店</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="/test/host"><i class="fa fa-dashboard"></i> 主页</a></li>
                    <li><a href="#">搜索结果</a></li>
                </ol>
            </section>

            <!-- Main content -->
            <section class="content">

                <div class="box box-default " style="margin: 5px auto;" th:each="result,resultStat: ${resultList}" th:if="${resultStat.count lt 10 && resultNum!=0}">
                    <!--<div class="box-header with-border">-->
                        <!--<h3 class="box-title">Blank Box</h3>-->
                    <!--</div>-->
                    <div class="box-body" style="padding-left: 10px;position: relative;">

                        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">
                            <img th:src="${result.hotelPhoto1}" alt="Product Image">
                        </div>
                        <div class="product-info" style="margin-right: 10px;overflow: hidden">
                            <h3><i class="fa fa-fw fa-bed"></i>
                            <a href="javascript:void(0)" class="product-title"><span th:text="${result.hotelName}"></span> </a>
                                <span class="pull-right text-red"><i class="fa fa-fw fa-cny"></i>1800起</span></h3>


                            <p id="hotelStar"><span  class="label label-warning">品质保证</span>
                                <span th:each="i:${#numbers.sequence(1,result.getHotelGrade())}">
                                    <i class="fa fa-fw fa-star" ></i>
                                </span>

                            </p>
                            <small><span th:text="${result.hotelAddress}"></span> </small>

                            <span class="product-description block">
                                <p><br>&emsp;&emsp;<span th:text="${result.hotelOverview}"></span></p>
                            </span>
                            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>
                        </div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">Hover Data Table</h3>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <table id="example2" class="table table-bordered table-hover">
                            <thead>
                            <tr>
                                <th>Rendering engine</th>
                                <th>Browser</th>
                                <th>Platform(s)</th>
                                <th>Engine version</th>
                                <th>CSS grade</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>Trident</td>
                                <td>Internet
                                    Explorer 4.0
                                </td>
                                <td>Win 95+</td>
                                <td> 4</td>
                                <td>X</td>
                            </tr>
                            <tr>
                                <td>Trident</td>
                                <td>Internet
                                    Explorer 5.0
                                </td>
                                <td>Win 95+</td>
                                <td>5</td>
                                <td>C</td>
                            </tr>
                            <tr>
                                <td>Trident</td>
                                <td>Internet
                                    Explorer 5.5
                                </td>
                                <td>Win 95+</td>
                                <td>5.5</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Trident</td>
                                <td>Internet
                                    Explorer 6
                                </td>
                                <td>Win 98+</td>
                                <td>6</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Trident</td>
                                <td>Internet Explorer 7</td>
                                <td>Win XP SP2+</td>
                                <td>7</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Trident</td>
                                <td>AOL browser (AOL desktop)</td>
                                <td>Win XP</td>
                                <td>6</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Firefox 1.0</td>
                                <td>Win 98+ / OSX.2+</td>
                                <td>1.7</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Firefox 1.5</td>
                                <td>Win 98+ / OSX.2+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Firefox 2.0</td>
                                <td>Win 98+ / OSX.2+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Firefox 3.0</td>
                                <td>Win 2k+ / OSX.3+</td>
                                <td>1.9</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Camino 1.0</td>
                                <td>OSX.2+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Camino 1.5</td>
                                <td>OSX.3+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Netscape 7.2</td>
                                <td>Win 95+ / Mac OS 8.6-9.2</td>
                                <td>1.7</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Netscape Browser 8</td>
                                <td>Win 98SE+</td>
                                <td>1.7</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Netscape Navigator 9</td>
                                <td>Win 98+ / OSX.2+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.0</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.1</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1.1</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.2</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1.2</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.3</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1.3</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.4</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1.4</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.5</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1.5</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.6</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>1.6</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.7</td>
                                <td>Win 98+ / OSX.1+</td>
                                <td>1.7</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Mozilla 1.8</td>
                                <td>Win 98+ / OSX.1+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Seamonkey 1.1</td>
                                <td>Win 98+ / OSX.2+</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Gecko</td>
                                <td>Epiphany 2.20</td>
                                <td>Gnome</td>
                                <td>1.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>Safari 1.2</td>
                                <td>OSX.3</td>
                                <td>125.5</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>Safari 1.3</td>
                                <td>OSX.3</td>
                                <td>312.8</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>Safari 2.0</td>
                                <td>OSX.4+</td>
                                <td>419.3</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>Safari 3.0</td>
                                <td>OSX.4+</td>
                                <td>522.1</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>OmniWeb 5.5</td>
                                <td>OSX.4+</td>
                                <td>420</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>iPod Touch / iPhone</td>
                                <td>iPod</td>
                                <td>420.1</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Webkit</td>
                                <td>S60</td>
                                <td>S60</td>
                                <td>413</td>
                                <td>A</td>
                            </tr>
                            <tr>
                                <td>Presto</td>
                                <td>Opera 7.0</td>
                                <td>Win 95+ / OSX.1+</td>
                                <td>-</td>
                                <td>A</td>
                            </tr>

                            </tbody>
                        </table>
                    </div>
                    <!-- /.box-body -->
                </div>

                <!-- /.box -->
            </section>
            <!-- /.content -->
        </div>

    </div>
    <div class="top text-center btn bg-purple" id="topArrow" title="回到顶部">
        <span  ><i id="TopArraow" class="fa fa-fw fa-chevron-up"></i></span>
    </div>


        <footer class="main-footer fixed">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
            电子科技大学第22组
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2019 <a href="https://www.uestc.edu.cn/">电子科技大学</a>.</strong> All rights reserved.
    </footer>
</div>


<script type="text/javascript" th:src="@{/adminlte/bower_components/jquery/dist/jquery.min.js}"
        src="../adminlte/bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" th:src="@{/adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js}"
        src="../adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" th:src="@{/adminlte/dist/js/adminlte.min.js}"
        src="../adminlte/dist/js/adminlte.min.js"></script>
<script src="../adminlte/bower_components/select2/dist/js/select2.full.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/select2/dist/js/select2.full.min.js}"></script>
<!-- DataTables -->
<script src="../adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js}"></script>
<script src="../adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js}"></script>
<!-- SlimScroll -->
<script src="../adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
<!-- FastClick -->
<script src="../adminlte/bower_components/fastclick/lib/fastclick.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/fastclick/lib/fastclick.js}"></script>
<!-- AdminLTE for demo purposes -->
<script src="../adminlte/dist/js/demo.js" type="text/javascript"
        th:src="@{/adminlte/dist/js/demo.js}"></script>

<script>

    $("#topArrow").click(function(){
        $(document).scrollTop(0);
    })
    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject();
    }


    $(function () {
        $('#example2').DataTable({
            'paging'      : true,
            'lengthChange': false,
            'searching'   : false,
            'ordering'    : true,
            'info'        : true,
            'autoWidth'   : false
        })
        xmlhttp.open("GET", "/test/city?country=" + encodeURI(encodeURI($("#CountrySelect").val())), true);
        xmlhttp.send();
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var text;
                text = xmlhttp.responseText;
                var jsonData = JSON.parse(text);
                for (x in jsonData) {
                    $("#CitySelect").append('<option>' + jsonData[x] + '</option>');
                }
                $('.select2').select2();
            }
        }
    })


    $("#CountrySelect").change(function () {
        xmlhttp.open("GET", "/test/city?country=" + encodeURI(encodeURI($("#CountrySelect").val())), true);
        xmlhttp.send();
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var text;
                text = xmlhttp.responseText;
                var jsonData = JSON.parse(text);
                $("#CitySelect").empty();
                for (x in jsonData) {
                    $("#CitySelect").append('<option>' + jsonData[x] + '</option>');
                }
                $('.select2').select2();
            }
        }
    });

    $("#CitySelect").change(function () {
        console.log($("#CitySelect").val())
    });
</script>



</body>
</html>