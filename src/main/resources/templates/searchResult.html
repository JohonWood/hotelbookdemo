<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
    <title>网站主页</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css"
          th:href="@{/adminlte/bower_components/bootstrap/dist/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/font-awesome/css/font-awesome.min.css"
          th:href="@{/adminlte/bower_components/font-awesome/css/font-awesome.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/Ionicons/css/ionicons.min.css"
          th:href="@{/adminlte/bower_components/Ionicons/css/ionicons.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/dist/css/AdminLTE.min.css"
          th:href="@{/adminlte/dist/css/AdminLTE.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/dist/css/skins/skin-blue.min.css"
          th:href="@{/adminlte/dist/css/skins/skin-blue.min.css}"/>
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/bower_components/select2/dist/css/select2.min.css"
          th:href="@{/adminlte/bower_components/select2/dist/css/select2.min.css}">
    <link rel="stylesheet" type="text/css" media="all" href="../adminlte/dist/css/AdminLTE.min.css"
          th:href="@{/adminlte/dist/css/AdminLTE.min.css}">
    <style>
        a:hover {
            text-decoration: underline
        }
        #topArrow{
            width: 60px;
            height: 30px;
            border-radius: 10px;
            position: fixed;
            right: 15px;
            bottom: 20%;
            border: none;
        }

        #FilterDiv {
            width: 250px;
            height: 200px;
            border-radius: 10px;
            position: fixed;
            left: 15px;
            top: 20%;
            border: none;
            margin-left: -10px;
            z-index:999
        }
    </style>
</head>
<body class="hold-transition skin-blue sidebar-mini layout-top-nav">

<div class="wrapper">
    <header class="main-header">
        <nav class="navbar navbar-static-top bg-purple" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a href="/504/host" class="navbar-brand"><b>504</b>订购网</a>
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                        <i class="fa fa-bars"></i>
                    </button>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                    <ul class="nav navbar-nav">
                        <li class="dropdown"><a href="#">Link <span class="sr-only">(current)</span></a></li>
                        <li><a href="#">Link</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a></li>
                                <li class="divider"></li>
                                <li><a href="#">One more separated link</a></li>
                            </ul>
                        </li>
                    </ul>
                    <form class="navbar-form navbar-left" role="search" th:action="@{/504/post}" method="post">
                        <div class="input-group">
                            <input type="text" name="hotelKey" class="form-control" placeholder="Search...">
                            <span class="input-group-btn">
                                <button type="submit" name="search" id="search-btn" class="btn btn-adn bg-purple-active"><i class="fa fa-search"></i>
                                </button>
                                <button type="button" name="search" id="Area-btn" class="btn btn-adn bg-purple-active dropdown-toggle" data-toggle="dropdown"><i class="fa fa-map-pin"></i>
                                </button>
                                <ul class="dropdown-menu navbar-static-top" role="menu">
                                <li>
                                    <select name="countryKey" class="select2" id="CountrySelect" style="width: 100%">
                                    <option th:each="country: ${countryList}" th:text="${country}" th:if="${country}!='中国'"></option>
                                    <option th:each="country: ${countryList}" th:text="${country}" selected="selected" th:if="${country}=='中国'"></option>
                                    </select>
                                </li>
                                <li>
                                    <select name="cityKey" class="form-control input-lg select2" id="CitySelect" style="width: 100%">
                                    <!--由JS代码生成-->
                                    </select>

                                </li>
                            </ul>
                            </span>
                        </div>
                        <!--<div class="form-group">-->
                            <!--<input type="text" class="form-control" id="navbar-search-input" placeholder="Search">-->
                        <!--</div>-->
                    </form>
                </div>
                <!-- /.navbar-collapse -->
                <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <!-- Tasks Menu -->
                        <li class="dropdown tasks-menu" th:if="${isLogin}==true">
                            <!-- Menu Toggle Button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="fa fa-flag-o"></i>
                                <span class="label label-danger" th:text="${numOfOrders}"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="header">你有<span th:text="${numOfOrders}"></span>个酒店订单</li>
                                <li>
                                    <!-- Inner menu: contains the tasks -->
                                    <ul class="menu">
                                        <li th:if="${numOfOrders}==0">
                                            <a href="#">
                                                <!-- Task title and progress text -->
                                                <h3>
                                                    无订单
                                                </h3>

                                                </p>
                                            </a>
                                        </li>
                                        <li th:each="order,orderStat: ${orderList}" th:if="${orderStat.count lt 3 && numOfOrders!=0}">
                                            <!-- Task item -->
                                            <a href="#">
                                                <!-- Task title and progress text -->
                                                <h3>
                                                    <span th:text="${order.hotelName}">酒店</span>
                                                </h3>
                                                <p class="text-black">
                                                    <span><span th:text="${order.roomNum}"></span>间房间</span>
                                                    <span class="pull-right"><i class="fa fa-calendar"></i>
                                            <span class="text-black" th:text='${order.checkInTime}'></span>入住</span>
                                                </p>
                                            </a>
                                        </li>
                                        <!-- end task item -->
                                    </ul>
                                </li>
                                <li class="footer">
                                    <a href="/mybook/booklist">查看所有订单</a>
                                </li>
                            </ul>
                        </li>
                        <!-- User Account Menu -->
                        <li class="dropdown user user-menu">
                            <!-- Menu Toggle Button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="hidden-xs" th:if="${isLogin}==true" th:text="${User_name}"></span>
                                <span class="hidden-xs" th:if="${isLogin}==false">未登录</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li class="user-header bg-purple">

                                    <p th:if="${isLogin}==true">
                                        <span th:text="${User_name}"></span>
                                        <br>
                                        <br>
                                        <small>亲爱的用户，欢迎来到504订房网！</small>
                                    </p>
                                    <p th:if="${isLogin}==false">
                                        <span>用户未登录</span>
                                        <br>
                                        <br>
                                        <small>如果未注册，请注册后登录网站</small>
                                    </p>
                                </li>
                                <!-- Menu Body -->
                                <li class="user-body" th:if="${isLogin}==true">
                                    <div class="row" style="">
                                        <div class="col-xs-4 text-center">

                                        </div>
                                        <div class="col-xs-4 text-center">
                                            <a href="/mybook/booklist">我的订单</a>
                                        </div>
                                        <div class="col-xs-4 text-center">
                                            <!--<a href="#">Friends</a>-->
                                        </div>
                                    </div>
                                    <!-- /.row -->
                                </li>
                                <!-- Menu Footer-->
                                <li class="user-footer" th:if="${isLogin}==true">
                                    <div class="pull-left">
                                        <a href="#" class="btn btn-default btn-flat">个人信息</a>
                                    </div>
                                    <div class="pull-right">
                                        <a href="/user/logoutAction" class="btn btn-default btn-flat">登出</a>
                                    </div>
                                </li>
                                <li class="user-footer" th:if="${isLogin}==false">
                                    <div class="pull-left">
                                        <a href="/user/login" class="btn btn-default btn-flat">登录</a>
                                    </div>
                                    <div class="pull-right">
                                        <a href="/user/register" class="btn btn-default btn-flat">注册</a>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-custom-menu -->
            </div>
            <!-- /.container-fluid -->
        </nav>
    </header>

    <div class="content-wrapper -align-center" th:style="'align-content: center;background: url('+@{/picture/backImg.jpg} + ') no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;'">

        <div class="top " id="FilterDiv" >
            <div class="box box-widget">
                <div class="box-header bg-purple">
                    <div class="user-block">
                        <span>筛选条件</span>
                    </div>
                    <!-- /.user-block -->
                    <div class="box-tools">
                        <button  type="button" class="btn btn-box-tool" id="filterBtn" ><i  class="fa fa-chevron-left fa-inverse"></i>
                        </button>
                    </div>
                    <!-- /.box-tools -->
                </div>
                <!-- /.box-header -->
                <div id="filterContent">
                    <div class="box-footer box-comments">
                        <div class="box-comment">
                            <div class="row" style="margin-left:10px">
                                <label>价格：</label>
                            </div>
                            <div class="input-group pull-left" style="width: 80px;">
                                <input id="lowText" type="text" name="lowPrice" class="form-control" placeholder="最低价">
                            </div>

                            <i class="fa fa-arrows-h fa-2x" aria-hidden="true" style="margin:3px 21px"></i>

                            <div class="input-group pull-right" style="width: 80px;">
                                <input id="highText" type="text" name="highPrice" class="form-control" placeholder="最高价">
                            </div>
                        </div>
                        <!-- /.box-comment -->
                        <div class="box-comment">
                            <div class="row" style="margin-left:10px">
                                <label>星级：</label>
                            </div>
                            <div class="input-group pull-left" style="width: 80px;">
                                <select id="gradeSelectL" class="select2" style="width: 80px;">
                                    <option id="gsl1" selected="selected">一星级</option>
                                    <option id="gsl2" >二星级</option>
                                    <option id="gsl3" >三星级</option>
                                    <option id="gsl4" >四星级</option>
                                    <option id="gsl5" >五星级</option>
                                </select>
                            </div>

                            <i class="fa fa-arrows-h fa-2x" aria-hidden="true" style="margin:3px 21px"></i>

                            <div class="input-group pull-right" style="width: 80px;">
                                <select id="gradeSelectH" class="select2" style="width: 80px;">
                                    <option id="gsh1" >一星级</option>
                                    <option id="gsh2" >二星级</option>
                                    <option id="gsh3" >三星级</option>
                                    <option id="gsh4" >四星级</option>
                                    <option id="gsh5" selected="selected">五星级</option>
                                </select>
                            </div>
                        </div>
                            <!-- /.comment-text -->
                    </div>


                    <div class="box-footer">
                        <button type="button" name="filterSubmit"  id="filterSub" class="btn btn-adn bg-purple-active pull-right" style="width: 80px"><i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
                <!-- /.box-footer -->
            </div>
        </div>
        <div class="container">
            <!-- Content Header (Page header) -->
            <section  class="content-header">
                <h1>
                    搜索结果
                    <small>总计<span id="numOfHotel" th:text="${resultNum}"></span>家酒店</small>
                </h1>
                <ol class="breadcrumb">
                    <li><a href="/504/host"><i class="fa fa-dashboard"></i> 主页</a></li>
                    <li><a href="#">搜索结果</a></li>
                </ol>
            </section>

            <!-- Main content -->
            <section id="resultSection"  class="content">
                <div class="text-center" id="none1"  th:if="${resultNum==0}"><h3>无搜索结果</h3></div>
                <div class="text-center" id="none2" style="display: none"><h3>无搜索结果</h3></div>
                <div th:id="'resultList'+${resultStat.count}" class="box box-default fullResultBox" style="margin: 5px auto;" th:each="result,resultStat: ${resultList}" th:if="${resultNum!=0}">
                    <div class="box-body" style="padding-left: 10px;position: relative;">
                        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">
                            <img th:src="${result.hotelPhoto1}" alt="Product Image">
                        </div>
                        <div class="product-info" style="margin-right: 10px;overflow: hidden">
                            <h3 ><i class="fa fa-fw fa-bed pull-left"></i>
                                <a href="javascript:void(0)" class="product-title">
                                    <span th:text="${result.hotelName}"></span>
                                </a>
                                <span class="pull-right">
                                    <a class="btn btn-warning" style="height: 40px;padding-top: 0px;font-size:25px" href="#">
                                         <i class="fa fa-thumbs-up"></i><span th:text="${result.hotelRating}"></span>
                                    </a>
                                </span>
                            </h3>
                            <h3>
                                <span class="pull-right text-red">
                                    <i class="fa fa-fw fa-cny"></i>
                                    <span class="hotelFee" th:text="${result.leastPrice}">
                                    </span>起
                                </span>
                            </h3>
                            <span>
                                <p id="hotelStar">
                                    <span class="label label-warning">品质保证</span>
                                    <span th:id="'hotelGradeStar'+${resultStat.count}" th:each="i:${#numbers.sequence(1,result.getHotelGrade())}">
                                        <i class="fa fa-fw fa-star"></i>
                                    </span>
                                </p>
                                <small><span th:text="${result.hotelAddress}"></span> </small>
                            </span>
                            <span class="product-description block">
                                <p><br>&emsp<span th:text="${result.getHotelOverview()}"></span></p>
                            </span>
                            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>
                        </div>
                    </div>
                </div>
                <div class="text-center btn bg-purple center-block downList" title="加载10项" id="downList" th:if="${resultNum > 11}">
                    <span ><i class="fa fa-fw fa-chevron-down"></i></span>
                </div>
            </section>
        </div>

    </div>

    <div class="top text-center btn bg-purple" id="topArrow" title="回到顶部">
        <span  ><i id="TopArraow" class="fa fa-fw fa-chevron-up"></i></span>
    </div>
        <footer class="main-footer fixed">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
            电子科技大学第22组
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2019 <a href="https://www.uestc.edu.cn/">电子科技大学</a>.</strong> All rights reserved.
    </footer>
</div>


<script type="text/javascript" th:src="@{/adminlte/bower_components/jquery/dist/jquery.min.js}"
        src="../adminlte/bower_components/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" th:src="@{/adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js}"
        src="../adminlte/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript" th:src="@{/adminlte/dist/js/adminlte.min.js}"
        src="../adminlte/dist/js/adminlte.min.js"></script>
<script src="../adminlte/bower_components/select2/dist/js/select2.full.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/select2/dist/js/select2.full.min.js}"></script>
<!-- DataTables -->
<script src="../adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/datatables.net/js/jquery.dataTables.min.js}"></script>
<script src="../adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js}"></script>
<!-- SlimScroll -->
<script src="../adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
<!-- FastClick -->
<script src="../adminlte/bower_components/fastclick/lib/fastclick.js" type="text/javascript"
        th:src="@{/adminlte/bower_components/fastclick/lib/fastclick.js}"></script>
<!-- AdminLTE for demo purposes -->
<script src="../adminlte/dist/js/demo.js" type="text/javascript"
        th:src="@{/adminlte/dist/js/demo.js}"></script>
<script src="../adminlte/dist/js/jquery.rotate.js" type="text/javascript"
        th:src="@{/adminlte/dist/js/jquery.rotate.js}"></script>

<script th:inline="javascript">
    var indexOfList=10;
    var filterAni=false;

    $("#topArrow").click(function(){
        $(document).scrollTop(0);
    })

    $('#filterBtn').click(function () {
        if (filterAni==false){
            $('#filterContent').hide(500,function () {
                $('#FilterDiv').animate({left:'-200px'},function () {
                    $('#filterBtn').rotate({animateTo: 180,duration:500});

                });
            });
            filterAni=true;
        }
        else{
            $('#FilterDiv').animate({left:'15px'},function (){
                $('#filterContent').show(500,function () {
                    $('#filterBtn').rotate({animateTo: 180,duration:500});
                })
            })
            filterAni=false;
        }


    })

    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject();
    }




    $(function () {
        xmlhttp.open("GET", "/504/city?country=" + encodeURI(encodeURI($("#CountrySelect").val())), true);
        xmlhttp.send();
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var text;
                text = xmlhttp.responseText;
                var jsonData = JSON.parse(text);
                for (x in jsonData) {
                    if (jsonData[x]=="成都") {
                        $("#CitySelect").append('<option selected="selected">' + jsonData[x] + '</option>');
                    }
                    else{
                        $("#CitySelect").append('<option>' + jsonData[x] + '</option>');
                    }

                }
                $('.select2').select2();
            }
        }
    })


    $("#CountrySelect").change(function () {
        xmlhttp.open("GET", "/504/city?country=" + encodeURI(encodeURI($("#CountrySelect").val())), true);
        xmlhttp.send();
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var text;
                text = xmlhttp.responseText;
                var jsonData = JSON.parse(text);
                $("#CitySelect").empty();
                for (x in jsonData) {
                    $("#CitySelect").append('<option>' + jsonData[x] + '</option>');
                }
                $('.select2').select2();
            }
        }
    });

    $('#filterSub').click(function () {
        var lowPrice=$('#lowText').val();
        var highPrice=$('#highText').val();
        for (var i=1;i<=5;i++){
            if ($("#gradeSelectL option:selected").attr("id")=="gsl"+i){
                var lowGrade=i;
            }
        }
        for (var i=1;i<=5;i++){
            if ($("#gradeSelectH option:selected").attr("id")=="gsh"+i){
                var highGrade=i;
            }
        }

        if (lowPrice!=""&&!isNumber(lowPrice)){
            alert("最低价需要输入有效数字");
        }
        else if(highPrice!=""&&!isNumber(highPrice)){
            alert("最高价需要输入有效数字");
        }
        else if (lowGrade>highGrade){
            alert("请将星级从小到大设置");
        }
        else{
            xmlhttp.open("GET", "/504/filter?lowPrice="+lowPrice+"&highPrice="+highPrice+"&lowGrade="+lowGrade+"&highGrade="+highGrade, true);
            xmlhttp.send();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var text;
                    text = xmlhttp.responseText;
                    text = JSON.parse(text)
                    var num=parseInt(text.length)
                    $('#numOfHotel').text(num);
                    $('.fullResultBox').remove();
                    if (parseInt(num) ==0){
                        $('.downList').hide()
                        $('#none2').show();
                    }
                    else if(num<10){
                        var x=0;
                        $('#none2').after(
                            '<div id="resultList'+(parseInt(x)+1)+'" class="box box-default fullResultBox" style="margin: 5px auto;">\n' +
                            '    <div class="box-body" style="padding-left: 10px;position: relative;">\n' +
                            '        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">\n' +
                            '            <img src="'+text[x]["hotelPhoto1"]+'" alt="Product Image">\n' +
                            '        </div>\n' +
                            '        <div class="product-info" style="margin-right: 10px;overflow: hidden">\n' +
                            '            <h3><i class="fa fa-fw fa-bed"></i>\n' +
                            '                <a href="javascript:void(0)" class="product-title"><span>'+text[x]["hotelName"]+'</span> </a>\n' +
                            '                <span class="pull-right"><a class="btn btn-warning" style="height: 40px;padding-top: 0px;font-size:25px" href="#">\n'+
                            '                <i class="fa fa-thumbs-up"></i><span>'+text[x]["hotelRating"]+'</span></a></span>\n' +
                            '            </h3>\n'+
                            '            <h3><span class="pull-right text-red"><i class="fa fa-fw fa-cny"></i><span class="hotelFee">'+text[x]["leastPrice"]+'</span>起</span></h3>\n'+
                            '            <p id="hotelStar"><span  class="label label-warning">品质保证</span>\n' +
                            '                <span id="hotelGradeStar'+(parseInt(x)+1)+'">\n' +
                            '                </span>\n' +
                            '            </p>\n' +
                            '            <small><span>'+ text[x]["hotelAddress"]+'</span> </small>\n' +
                            '            <span class="product-description block">\n' +
                            '                <p><br>&emsp;&emsp;<span>'+text[x]["hotelOverview"]+'</span></p>\n' +
                            '            </span>\n' +
                            '            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>\n' +
                            '        </div>\n' +
                            '    </div>\n' +
                            '</div>'
                        );
                        for (var i=0;i<parseInt(text[x]["hotelGrade"]);i++){
                            $('#hotelGradeStar'+(parseInt(x)+1)).append('<i class="fa fa-fw fa-star" ></i>')
                        }
                        x = x+1;
                        for (x;x<num;x++) {
                            console.log(text[x])
                            $('#resultList'+(parseInt(x))).after(
                                '<div id="resultList'+(parseInt(x)+1)+'" class="box box-default fullResultBox" style="margin: 5px auto;">\n' +
                                '    <div class="box-body" style="padding-left: 10px;position: relative;">\n' +
                                '        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">\n' +
                                '            <img src="'+text[x]["hotelPhoto1"]+'" alt="Product Image">\n' +
                                '        </div>\n' +
                                '        <div class="product-info" style="margin-right: 10px;overflow: hidden">\n' +
                                '            <h3><i class="fa fa-fw fa-bed"></i>\n' +
                                '                <a href="javascript:void(0)" class="product-title"><span>'+text[x]["hotelName"]+'</span> </a>\n' +
                                '                <span class="pull-right"><a class="btn btn-warning" style="height: 40px;padding-top: 0px;font-size:25px" href="#">\n'+
                                '                <i class="fa fa-thumbs-up"></i><span>'+text[x]["hotelRating"]+'</span></a></span>\n' +
                                '            </h3>\n'+
                                '            <h3><span class="pull-right text-red"><i class="fa fa-fw fa-cny"></i><span class="hotelFee">'+text[x]["leastPrice"]+'</span>起</span></h3>\n'+
                                '            <p id="hotelStar"><span  class="label label-warning">品质保证</span>\n' +
                                '                <span id="hotelGradeStar'+(parseInt(x)+1)+'">\n' +
                                '                </span>\n' +
                                '            </p>\n' +
                                '            <small><span>'+ text[x]["hotelAddress"]+'</span> </small>\n' +
                                '            <span class="product-description block">\n' +
                                '                <p><br>&emsp;&emsp;<span>'+text[x]["hotelOverview"]+'</span></p>\n' +
                                '            </span>\n' +
                                '            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>\n' +
                                '        </div>\n' +
                                '    </div>\n' +
                                '</div>'
                            );
                            for (var i=0;i<parseInt(text[x]["hotelGrade"]);i++){
                                $('#hotelGradeStar'+(parseInt(x)+1)).append('<i class="fa fa-fw fa-star" ></i>')
                            }
                        }
                        $('.downList').hide()
                        $('#none2').hide();
                    }
                    else{
                        $('#none2').hide();
                        var x = 0;
                        $('#none2').after(
                            '<div id="resultList'+(parseInt(x)+1)+'" class="box box-default fullResultBox" style="margin: 5px auto;">\n' +
                            '    <div class="box-body" style="padding-left: 10px;position: relative;">\n' +
                            '        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">\n' +
                            '            <img src="'+text[x]["hotelPhoto1"]+'" alt="Product Image">\n' +
                            '        </div>\n' +
                            '        <div class="product-info" style="margin-right: 10px;overflow: hidden">\n' +
                            '            <h3><i class="fa fa-fw fa-bed"></i>\n' +
                            '                <a href="javascript:void(0)" class="product-title"><span>'+text[x]["hotelName"]+'</span> </a>\n' +
                            '                <span class="pull-right"><a class="btn btn-warning" style="height: 40px;padding-top: 0px;font-size:25px" href="#">\n'+
                            '                <i class="fa fa-thumbs-up"></i><span>'+text[x]["hotelRating"]+'</span></a></span>\n' +
                            '            </h3>\n'+
                            '            <h3><span class="pull-right text-red"><i class="fa fa-fw fa-cny"></i><span class="hotelFee">'+text[x]["leastPrice"]+'</span>起</span></h3>\n'+
                            '            <p id="hotelStar"><span  class="label label-warning">品质保证</span>\n' +
                            '                <span id="hotelGradeStar'+(parseInt(x)+1)+'">\n' +
                            '                </span>\n' +
                            '            </p>\n' +
                            '            <small><span>'+ text[x]["hotelAddress"]+'</span> </small>\n' +
                            '            <span class="product-description block">\n' +
                            '                <p><br>&emsp;&emsp;<span>'+text[x]["hotelOverview"]+'</span></p>\n' +
                            '            </span>\n' +
                            '            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>\n' +
                            '        </div>\n' +
                            '    </div>\n' +
                            '</div>'
                        );
                        for (var i=0;i<parseInt(text[x]["hotelGrade"]);i++){
                            $('#hotelGradeStar'+(parseInt(x)+1)).append('<i class="fa fa-fw fa-star" ></i>')
                        }
                        x = x+1;
                        for (x;x<10;x++){
                            console.log(text[x])
                            $('#resultList'+(parseInt(x))).after(
                                '<div id="resultList'+(parseInt(x)+1)+'" class="box box-default fullResultBox" style="margin: 5px auto;">\n' +
                                '    <div class="box-body" style="padding-left: 10px;position: relative;">\n' +
                                '        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">\n' +
                                '            <img src="'+text[x]["hotelPhoto1"]+'" alt="Product Image">\n' +
                                '        </div>\n' +
                                '        <div class="product-info" style="margin-right: 10px;overflow: hidden">\n' +
                                '            <h3><i class="fa fa-fw fa-bed"></i>\n' +
                                '                <a href="javascript:void(0)" class="product-title"><span>'+text[x]["hotelName"]+'</span> </a>\n' +
                                '                <span class="pull-right"><a class="btn btn-warning" style="height: 40px;padding-top: 0px;font-size:25px" href="#">\n'+
                                '                <i class="fa fa-thumbs-up"></i><span>'+text[x]["hotelRating"]+'</span></a></span>\n' +
                                '            </h3>\n'+
                                '            <h3><span class="pull-right text-red"><i class="fa fa-fw fa-cny"></i><span class="hotelFee">'+text[x]["leastPrice"]+'</span>起</span></h3>\n'+
                                '            <p id="hotelStar"><span  class="label label-warning">品质保证</span>\n' +
                                '                <span id="hotelGradeStar'+(parseInt(x)+1)+'">\n' +
                                '                </span>\n' +
                                '            </p>\n' +
                                '            <small><span>'+ text[x]["hotelAddress"]+'</span> </small>\n' +
                                '            <span class="product-description block">\n' +
                                '                <p><br>&emsp;&emsp;<span>'+text[x]["hotelOverview"]+'</span></p>\n' +
                                '            </span>\n' +
                                '            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>\n' +
                                '        </div>\n' +
                                '    </div>\n' +
                                '</div>'
                            );
                            for (var i=0;i<parseInt(text[x]["hotelGrade"]);i++){
                                $('#hotelGradeStar'+(parseInt(x)+1)).append('<i class="fa fa-fw fa-star" ></i>')
                            }
                        }
                        if (num ==10) {
                            $('.downList').hide();
                        }
                        else{
                            $('.downList').show();
                        }

                        //indexOfList=parseInt($('#numOfHotel').text())
                        indexOfList=10;
                    }

                }
            }

        }
    })

    $('.downList').on("click",function (){
        if(indexOfList==parseInt($('#numOfHotel').text())){
            $('#downList').attr("title","已全部加载")
        }
        else {
            var x = 0;
            xmlhttp.open("GET", "/504/down?indexOfList=" + indexOfList, true);
            xmlhttp.send();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var text;
                    text = xmlhttp.responseText;
                    text = JSON.parse(text)
                    for (x in text) {
                        console.log(text[x]["hotelName"])
                        $('#resultList'+(parseInt(x)+indexOfList)).after(
                            '<div id="resultList'+(parseInt(x)+indexOfList+1)+'" class="box box-default fullResultBox" style="margin: 5px auto;">\n' +
                            '    <div class="box-body" style="padding-left: 10px;position: relative;">\n' +
                            '        <div class="product-img sidebar-menu" style="float: left;margin-right: 20px;margin-top: 30px">\n' +
                            '            <img src="'+text[x]["hotelPhoto1"]+'" alt="Product Image">\n' +
                            '        </div>\n' +
                            '        <div class="product-info" style="margin-right: 10px;overflow: hidden">\n' +
                            '            <h3><i class="fa fa-fw fa-bed"></i>\n' +
                            '                <a href="javascript:void(0)" class="product-title"><span>'+text[x]["hotelName"]+'</span> </a>\n' +
                            '                <span class="pull-right"><a class="btn btn-warning" style="height: 40px;padding-top: 0px;font-size:25px" href="#">\n'+
                            '                <i class="fa fa-thumbs-up"></i><span>'+text[x]["hotelRating"]+'</span></a></span>\n' +
                            '            </h3>\n'+
                            '            <h3><span class="pull-right text-red"><i class="fa fa-fw fa-cny"></i><span class="hotelFee">'+text[x]["leastPrice"]+'</span>起</span></h3>\n'+
                            '            <p id="hotelStar"><span  class="label label-warning">品质保证</span>\n' +
                            '                <span id="hotelGradeStar'+(parseInt(x)+indexOfList+1)+'">\n'+
                            '                </span>\n' +
                            '            </p>\n' +
                            '            <small><span>'+ text[x]["hotelAddress"]+'</span> </small>\n' +
                            '            <span class="product-description block">\n' +
                            '                <p><br>&emsp;&emsp;<span>'+text[x]["hotelOverview"]+'</span></p>\n' +
                            '            </span>\n' +
                            '            <a class="btn bg-purple btn-lg pull-right" href="#">查看详情</a>\n' +
                            '        </div>\n' +
                            '    </div>\n' +
                            '</div>'
                        );
                        for (var i=0;i<parseInt(text[x]["hotelGrade"]);i++){
                            $('#hotelGradeStar'+(parseInt(x)+indexOfList+1)).append('<i class="fa fa-fw fa-star" ></i>')
                        }
                    }
                    x = parseInt(x);
                    if (x + indexOfList + 1 == $('#numOfHotel').text()) {
                        indexOfList = parseInt($('#numOfHotel').text())
                    } else {
                        indexOfList = indexOfList + x + 1;
                    }

                    if(indexOfList==parseInt($('#numOfHotel').text())){
                        $('#downList').hide()
                    }
                }
            }
        }
    })

    function isNumber(value) {         //验证是否为数字
        var patrn = /^(-)?\d+(\.\d+)?$/;
        if (patrn.exec(value) == null || value == "") {
            return false
        } else {
            return true
        }
    }

</script>



</body>
</html>